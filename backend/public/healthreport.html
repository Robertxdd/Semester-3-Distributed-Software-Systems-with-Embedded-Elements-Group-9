<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Smart Desk Supervisor - Health & Reports</title>

  <link rel="stylesheet" href="styles.css">
  <script src="theme.js"></script>
</head>

<body>
  <div class="app">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true">S</div>
        <div>Smart Desk Supervisor</div>
      </div>

      <nav class="nav" aria-label="Primary navigation">
        <a href="deskcontrol.html" data-admin-only><span>My Desk</span></a>
        <a href="user.html" data-user-only><span>User Dashboard</span></a>
        <a href="healthreport.html" class="active"><span>Health & Reports</span></a>
        <a href="settings.html" data-admin-only><span>Admin - Settings</span></a>
        <a href="manager.html" data-admin-only><span>Admin - Desks</span></a>
      </nav>

      <section class="sidebar-foot">
        <p class="foot-title">Current user</p>
        <p class="foot-meta" id="current-user-role">User</p>
        <p class="foot-meta small">Aggregated reports from live data</p>
      </section>
    </aside>

    <!-- Main -->
    <main class="main">

      <header class="topbar">
        <div class="topbar-left">
          <h1>Health & usage overview</h1>
          <p class="subtitle">
            Sit/stand balance, well-being scores, and desk usage insights.
          </p>
        </div>

        <div class="topbar-actions">
          <button class="btn secondary" data-theme-toggle>Toggle theme</button>
          <button class="btn secondary" data-logout>Logout</button>
        </div>
      </header>

      <!-- KPIs -->
      <section class="kpis">
        <article class="card kpi">
          <h2>Active desks</h2>
          <p class="kpi-main" id="kpi-active-desks">--</p>
          <p class="kpi-sub">Total desks</p>
        </article>

        <article class="card kpi">
          <h2>Balanced users</h2>
          <p class="kpi-main" id="kpi-balanced">--</p>
          <p class="kpi-sub">Sit / stand mix</p>
        </article>

        <article class="card kpi">
          <h2>Maintenance alerts</h2>
          <p class="kpi-main" id="kpi-maintenance">--</p>
          <p class="kpi-sub badge-inline warn">Errors today</p>
        </article>

        <article class="card kpi">
          <h2>Energy saving</h2>
          <p class="kpi-main" id="kpi-energy">--</p>
          <p class="kpi-sub">Recommendation status</p>
        </article>
      </section>

      <!-- Dashboards -->
      <section class="section card">
        <header class="title">
          <h3>Well-being dashboards</h3>
          <p class="subtitle">Posture, movement, and rhythm</p>
        </header>

        <div class="chart-grid">

          <!-- Donut -->
          <div class="chart-tile">
            <div class="flex between">
              <strong>Posture mix</strong>
              <span class="pill" id="hr-total-min">--</span>
            </div>

            <div id="hr-donut" class="donut">
              <div class="donut-center">
                <strong id="hr-stand-pct">0%</strong>
                <span class="helper">standing</span>
              </div>
            </div>

            <div class="legend">
              <div class="legend-item">
                <span class="dot sitting"></span>
                Sitting <span id="hr-sit-pct">0%</span>
              </div>
              <div class="legend-item">
                <span class="dot standing"></span>
                Standing <span id="hr-stand-pct-legend">0%</span>
              </div>
            </div>
          </div>

          <!-- Bars -->
          <div class="chart-tile">
            <div class="flex between">
              <strong>Hourly activity</strong>
              <span class="pill" id="hr-events">--</span>
            </div>

            <div class="spark-bars" id="hr-bars"></div>
            <p class="helper">Activity distribution today</p>
          </div>

          <!-- Score -->
          <div class="chart-tile">
            <div class="flex between">
              <strong>Well-being score</strong>
              <span class="pill" id="hr-moves">--</span>
            </div>

            <div class="insight">
              <span class="label">Score</span>
              <div class="value" id="hr-score">--</div>
              <p class="helper">Movement + balance</p>
            </div>

            <div class="insight">
              <span class="label">Hints</span>
              <div class="value" id="hr-hint">--</div>
            </div>
          </div>

        </div>
      </section>

      <!-- History & usage -->
      <section class="grid">
        <section class="section card">
          <header class="title">
            <h3>Recent desk activity</h3>
          </header>

          <table class="table compact">
            <thead>
              <tr>
                <th>When</th>
                <th>Height</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="state-history-body"></tbody>
          </table>

          <p class="helper" id="health-helper"></p>
          <p><strong id="health-score">Health score: --</strong></p>
        </section>

        <section class="section card">
          <header class="title">
            <h3>Space utilization</h3>
          </header>
          <p class="helper" id="usage-summary">--</p>
        </section>
      </section>

      <!-- Errors & reports -->
      <section class="grid">
        <section class="section card">
          <header class="title"><h3>Errors</h3></header>
          <ul class="helper" id="errors-list"></ul>
        </section>

        <section class="section card">
          <header class="title"><h3>Generated report</h3></header>
          <p class="helper" id="reports-summary"></p>
        </section>
      </section>

    </main>
  </div>

  <script src="healthreport.js"></script>
</body>
</html>
