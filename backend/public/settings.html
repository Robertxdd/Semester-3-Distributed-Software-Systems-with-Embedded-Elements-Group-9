<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Smart Desk Supervisor - Admin Settings</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body class="theme-dark">
  <div class="app">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true">S</div>
        <div class="brand-text">
          <span class="brand-title">Smart Desk</span>
          <span class="brand-subtitle">Supervisor</span>
        </div>
      </div>

      <nav class="nav" aria-label="Primary navigation">
        <a href="deskcontrol.html" class="nav-item">
          <span class="nav-label">My Desk</span>
        </a>
        <a href="healthreport.html" class="nav-item">
          <span class="nav-label">Health & Reports</span>
        </a>
        <a href="settings.html" class="nav-item active">
          <span class="nav-label">Admin - Settings</span>
        </a>
        <a href="manager.html" class="nav-item">
          <span class="nav-label">Manager</span>
        </a>
      </nav>

      <section class="sidebar-foot">
        <p class="foot-title">Current user</p>
        <p class="foot-meta">Administrator</p>
        <p class="foot-meta small">Full admin access.</p>
      </section>
    </aside>

    <!-- Main content -->
    <div class="main">

      <!-- Top bar -->
      <header class="topbar">
        <div class="topbar-left">
          <h1>System & admin settings</h1>
          <p class="subtitle">
            Configure connectivity, energy policy and data retention for Smart Desks.
          </p>
        </div>
        <div class="topbar-right">
          <span class="pill pill-success">Normal mode</span>
          <span class="pill">Local only</span>
        </div>
      </header>

      <!-- Main grid -->
      <section class="page-grid">

        <!-- API configuration -->
        <section class="section card card-accent">
          <div class="card-header">
            <div>
              <h3>WiFi2BLE & API configuration</h3>
              <p class="subtitle">
                Connection settings for the Desk REST API (simulator or real hardware).
              </p>
            </div>
            <span class="card-tag">Connectivity</span>
          </div>

          <div class="card-body">
            <form class="form" action="#">

              <div class="field">
                <label for="mode">System mode</label>
                <select id="mode" class="input">
                  <option>Development - Simulator only</option>
                  <option>Hybrid - Simulator + selected real desks</option>
                  <option>Production - Real desks only</option>
                </select>
              </div>

              <div class="field">
                <label for="base-url">Base URL</label>
                <input id="base-url" class="input" type="text"
                  placeholder="http://127.0.0.1:8000/api/">
              </div>

              <div class="field">
                <label for="api-key">API key</label>
                <input id="api-key" class="input" type="password" placeholder="Enter API key">
                <p class="helper">
                  Optional: 32-character key for authenticated simulators.
                </p>
              </div>

              <div class="field">
                <label for="poll-interval">Polling interval</label>
                <select id="poll-interval" class="input">
                  <option>5 s - Real-time feedback</option>
                  <option selected>10 s - Balanced</option>
                  <option>30 s - Low network usage</option>
                </select>
              </div>

              <div class="field">
                <label class="checkbox">
                  <input type="checkbox" checked>
                  <span>Enable health data collection</span>
                </label>

                <label class="checkbox">
                  <input type="checkbox" checked>
                  <span>Anonymize user IDs in telemetry</span>
                </label>
              </div>

              <button class="btn" type="button" id="save-connection">Save connection settings</button>
            </form>
          </div>
        </section>

        <!-- Roles -->
        <section class="section card">
          <div class="card-header">
            <div>
              <h3>User roles & access control</h3>
              <p class="subtitle">Overview of user permissions.</p>
            </div>
            <span class="card-tag card-tag-soft">Read-only</span>
          </div>
          <div class="body table-wrap">
            <div class="helper">User list will be loaded from the API.</div>
          </div>
        </section>

        <!-- Energy -->
        <section class="section card">
          <div class="card-header">
            <div>
              <h3>Energy & idle power-saving</h3>
              <p class="subtitle">Define how desks behave with no activity.</p>
            </div>
            <span class="card-tag">Energy</span>
          </div>

          <div class="card-body">
            <form class="form">
              <div class="field">
                <label for="idle-timeout">Idle timeout</label>
                <select id="idle-timeout" class="input">
                  <option>5 minutes</option>
                  <option selected>10 minutes</option>
                  <option>15 minutes</option>
                  <option>30 minutes</option>
                </select>
              </div>

              <div class="field">
                <label for="wake-mode">Wake-up behavior</label>
                <select id="wake-mode" class="input">
                  <option selected>User interaction only</option>
                  <option>Any network command</option>
                </select>
              </div>

              <button class="btn" type="button" id="save-energy">Save energy policy</button>
            </form>
          </div>
        </section>

        <!-- Data -->
        <section class="section card">
          <div class="card-header">
            <div>
              <h3>Data & privacy</h3>
              <p class="subtitle">Control usage metrics and anonymization.</p>
            </div>
            <span class="card-tag">Privacy</span>
          </div>

          <div class="card-body">
            <form class="form">
              <div class="field">
                <label for="retention">Usage data retention</label>
                <select id="retention" class="input">
                  <option>90 days</option>
                  <option selected>180 days</option>
                  <option>365 days</option>
                </select>
              </div>

              <div class="field field-stack">
                <label class="checkbox">
                  <input type="checkbox" checked>
                  <span>Store only aggregated metrics</span>
                </label>

                <label class="checkbox">
                  <input type="checkbox" checked>
                  <span>Mask desk IDs in exported reports</span>
                </label>
              </div>

              <button class="btn" type="button" id="save-data">Save data settings</button>
            </form>
          </div>
        </section>

      </section>
    </div>
  </div>

  <script>
    function flash(message) {
      alert(message);
    }

    document.getElementById('save-connection').onclick = () => {
      const payload = {
        mode: document.getElementById('mode').value,
        base_url: document.getElementById('base-url').value,
        api_key: document.getElementById('api-key').value,
        poll_interval: document.getElementById('poll-interval').value,
        health_collection: true,
        anonymize: true,
      };

      localStorage.setItem('connection_settings', JSON.stringify(payload));
      flash('Connection settings saved locally.');
    };

    document.getElementById('save-energy').onclick = () => {
      const payload = {
        idle_timeout: document.getElementById('idle-timeout').value,
        wake_mode: document.getElementById('wake-mode').value,
      };

      localStorage.setItem('energy_settings', JSON.stringify(payload));
      flash('Energy policy saved locally.');
    };

    document.getElementById('save-data').onclick = () => {
      const payload = {
        retention: document.getElementById('retention').value,
        aggregated_only: true,
        mask_ids: true,
      };

      localStorage.setItem('data_settings', JSON.stringify(payload));
      flash('Data settings saved locally.');
    };
  </script>

</body>
</html>
